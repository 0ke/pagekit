/*! UIkit 2.6.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */

!function(a){var b;jQuery&&jQuery.UIkit&&(b=a(jQuery,jQuery.UIkit)),"function"==typeof define&&define.amd&&define("uikit-sortable",["uikit"],function(){return b||a(jQuery,jQuery.UIkit)})}(function(a,b){"use strict";function c(a,b){var c=a.parentNode;if(b.parentNode!=c)return!1;for(var d=a.previousSibling;d&&9!==d.nodeType;){if(d===b)return!0;d=d.previousSibling}return!1}function d(a,b){var c=b;if(c==a)return null;for(;c;){if(c.parentNode===a)return c;if(c=c.parentNode,!c||!c.ownerDocument||11===c.nodeType)break}return null}function e(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a.returnValue=!1}var f="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,g=!f&&function(){var a=document.createElement("div");return"draggable"in a||"ondragstart"in a&&"ondrop"in a}();return b.component("sortable",{defaults:{warp:!1,animation:60,childClass:"uk-sortable-child",draggingClass:"uk-sortable-dragging",overClass:"uk-sortable-over",stop:function(){},start:function(){},change:function(){}},init:function(){function b(b){return function(c){var e=f&&c.touches&&c.touches[0]||{},g=e.target||c.target;if(f&&document.elementFromPoint&&(g=document.elementFromPoint(c.pageX-document.body.scrollLeft,c.pageY-document.body.scrollTop)),a(g).hasClass(k.options.childClass))b.apply(g,[c]);else if(g!==l){var h=d(l,g);h&&b.apply(h,[c])}}}function c(){g||(f?l.addEventListener("touchmove",u,!1):(l.addEventListener("mouseover",q,!1),l.addEventListener("mouseout",r,!1)),l.addEventListener(f?"touchend":"mouseup",s,!1),document.addEventListener(f?"touchend":"mouseup",t,!1),document.addEventListener("selectstart",e,!1))}function h(){g||(f?l.removeEventListener("touchmove",u,!1):(l.removeEventListener("mouseover",q,!1),l.removeEventListener("mouseout",r,!1)),l.removeEventListener(f?"touchend":"mouseup",s,!1),document.removeEventListener(f?"touchend":"mouseup",t,!1),document.removeEventListener("selectstart",e,!1))}var i,j,k=this,l=this.element[0],m=null,n=null;this.element.children().attr("draggable","true");var o=b(function(b){var d=a(b.target);j=!1,f&&(e(b),d.is("a")&&d.attr("href")&&d.one("touchend",function(){j||(location.href=d.attr("href"))})),b.dataTransfer&&(b.dataTransfer.effectAllowed="moving",b.dataTransfer.setData("Text","*")),m=this,a(this).addClass(k.options.draggingClass),i=k.element.children().addClass(k.options.childClass),c(),k.options.start(this,m),k.trigger("sortable-start",[k,m])}),p=b(function(a){return m?(a.preventDefault&&a.preventDefault(),!1):!0}),q=b(a.UIkit.Utils.debounce(function(){if(!m||m===this)return!0;var b=k.dragenterData(this);return k.dragenterData(this,b+1),0===b&&(a(this).addClass(k.options.overClass),k.options.warp||k.moveElementNextTo(m,this)),!1}),40),r=b(function(){var b=k.dragenterData(this);k.dragenterData(this,b-1),k.dragenterData(this)||(a(this).removeClass(k.options.overClass),k.dragenterData(this,!1))}),s=b(function(a){if("drop"===a.type&&(a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()),this!==m){if(k.options.warp){var b=m.nextSibling;this.parentNode.insertBefore(m,this),this.parentNode.insertBefore(this,b)}k.options.change(this,m),k.trigger("sortable-change",[k,m])}}),t=function(){m=null,n=null,k.element.children().each(function(){1===this.nodeType&&(a(this).removeClass(k.options.overClass).removeClass(k.options.draggingClass).removeClass(k.options.childClass),k.dragenterData(this,!1))}),h(),k.options.stop(this),k.trigger("sortable-stop",[k])},u=b(function(b){return j=!0,m&&m!==this&&n!==this?(i.removeClass(k.options.overClass),n=this,k.options.warp?a(this).addClass(k.options.overClass):k.moveElementNextTo(m,this),e(b)):!0});g?(l.addEventListener("dragstart",o,!1),l.addEventListener("dragenter",q,!1),l.addEventListener("dragleave",r,!1),l.addEventListener("drop",s,!1),l.addEventListener("dragover",p,!1),l.addEventListener("dragend",t,!1)):f?l.addEventListener("touchstart",o,!1):l.addEventListener("mousedown",o,!1)},dragenterData:function(b,c){return b=a(b),1==arguments.length?parseInt(b.attr("data-child-dragenter"),10)||0:void(c?b.attr("data-child-dragenter",Math.max(0,c)):b.attr("data-child-dragenter",""))},moveElementNextTo:function(b,d){var e=this,f=a(b).parent().css("min-height",""),g=c(b,d)?d:d.nextSibling,h=f.children(),i=h.length;return e.options.animation?(f.css("min-height",f.height()),h.stop().each(function(){var b=a(this);b.data("offset-before",b.position())}),d.parentNode.insertBefore(b,g),h=f.children().each(function(){var b=a(this);b.data("offset-after",b.position())}).each(function(){var b=a(this),c=b.data("offset-before");b.css({position:"absolute",top:c.top,left:c.left})}),void h.each(function(){var b=a(this),c=(b.data("offset-before"),b.data("offset-after"));b.css("pointer-events","none").width(),setTimeout(function(){b.animate({top:c.top,left:c.left},e.options.animation,function(){b.css({position:"",top:"",left:"","pointer-events":""}).removeClass(e.options.overClass).attr("data-child-dragenter",""),i--,i||f.css("min-height","")})},0)})):void d.parentNode.insertBefore(b,g)}}),a(document).on("uk-domready",function(){a("[data-uk-sortable]").each(function(){var c=a(this);if(!c.data("sortable")){b.sortable(c,b.Utils.options(c.attr("data-uk-sortable")))}})}),b.sortable});