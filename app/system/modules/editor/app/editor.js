!function e(t,n,i){function o(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(r)return r(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return o(n?n:e)},l,l.exports,e,t,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){e("./components/image/image.js"),e("./components/link/link.js"),e("./components/video/video.js"),e("./components/url.js"),e("./components/util.js"),jQuery(function(e){e(document).on("htmleditor-save",function(t,n){n.element[0].form&&e(n.element[0].form).submit()}),e("textarea[data-editor]").each(function(){var t=e(this).data();t.markdown="markdown"in t&&(""===t.markdown||t.markdown),UIkit.htmleditor(this,e.extend({},{marked:marked,CodeMirror:CodeMirror},t))})})},{"./components/image/image.js":2,"./components/link/link.js":4,"./components/url.js":5,"./components/util.js":6,"./components/video/video.js":8}],2:[function(e,t,n){var i=jQuery,o={el:"#editor-image",data:{view:"settings",style:"",image:{src:"",alt:""},finder:{root:"",select:""}},ready:function(){var e=this;this.$on("select.finder",function(t){e.finder.select=1==t.length&&t[0].match(/\.(png|jpg|jpeg|gif|svg)$/i)?t[0]:""}),this.$watch("image.src",this.preview),this.preview()},methods:{update:function(){var e=this.image;e.replace(e.tag.template({src:e.src,alt:e.alt}))},preview:function(){var e=this,t=new Image,n="";this.image.src&&(n=this.$url["static"](this.image.src)),t.onerror=function(){e.style=""},t.onload=function(){e.style='background-image: url("'+n+'"); background-size: contain'},t.src=n},openFinder:function(){this.view="finder",this.finder.select=""},closeFinder:function(e){this.view="settings",e&&(this.image.src=e)}}};UIkit.plugin("htmleditor","image",{init:function(e){var t=this;return this.editor=e,this.images=[],e.element.off("action.image"),e.element.on("action.image",function(){var n,i=e.editor.getCursor();t.images.every(function(e){return e.inRange(i)?(n=e,!1):!0}),t.openModal(n)}),e.element.on("render",function(){var n="gfm"!=e.getMode()?/<img(.+?)>/gi:/(?:<img(.+?)>|!(?:\[([^\n\]]*)\])(?:\(([^\n\]]*)\))?)/gi;t.images=e.replaceInPreview(n,t.replaceInPreview)}),e.preview.on("click",".js-editor-image .js-config",function(){var n=e.preview.find(".js-editor-image .js-config").index(this);t.openModal(t.images[n])}),e.preview.on("click",".js-editor-image .js-remove",function(){var n=e.preview.find(".js-editor-image .js-remove").index(this);t.images[n].replace("")}),e},openModal:function(t){var n,r=this.editor,a=r.editor.getCursor(),s=i.extend(!0,{},o),c=r.element.data("finder-options"),d=c.root.replace(/^\/+|\/+$/g,"")+"/";t||(t={tag:"html"==r.getCursorMode()?'<img src="${src}" alt="${alt}">':"![${alt}](${src})",replace:function(e){r.editor.replaceRange(e,a)}}),n=i(e("./modal.html")).appendTo("body"),n.on("hide.uk.modal",function(){i(this).remove()}),UIkit.modal(n).show(),i.extend(s.data.image,t),s.data.finder.root=d,s=new Vue(s)},replaceInPreview:function(e){if("<"==e.matches[0][0]){if(e.matches[0].match(/js\-no\-parse/))return!1;var t=e.matches[0].match(/src="(.*?)"/),n=e.matches[0].match(/alt="(.*?)"/);e.src=t?t[1]:"",e.alt=n?n[1]:"",e.tag=e.matches[0].replace(/src="(.*?)"/,'src="${src}"').replace(/alt="(.*?)"/,'alt="${alt}"')}else e.src=e.matches[3].trim(),e.alt=e.matches[2],e.tag="![${alt}](${src})";return templates["image.replace"].template({src:e.src,alt:e.alt}).replace(/(\r\n|\n|\r)/gm,"")}})},{"./modal.html":3}],3:[function(e,t,n){t.exports='<div id="editor-image" class="uk-modal">\n    <div class="uk-modal-dialog uk-form uk-form-stacked" v-class="uk-modal-dialog-large: view == \'finder\'">\n\n        <div v-show="view == \'settings\'">\n            <h1 class="uk-h3">{{ \'Image\' | trans }}</h1>\n            <div class="uk-form-row">\n                <div class="uk-form-controls">\n                    <div class="pk-thumbnail pk-thumbnail-image" v-attr="style: style"></div>\n                    <p class="uk-margin-small-top"><a v-on="click: openFinder">{{ \'Select image\' | trans }}</a></p>\n                </div>\n            </div>\n            <div class="uk-form-row">\n                <label for="form-src" class="uk-form-label">{{ \'URL\' | trans }}</label>\n                <div class="uk-form-controls">\n                    <input id="form-src" type="text" class="uk-width-1-1" v-model="image.src">\n                </div>\n            </div>\n            <div class="uk-form-row">\n                <label for="form-alt" class="uk-form-label">{{ \'Alt\' | trans }}</label>\n                <div class="uk-form-controls">\n                    <input id="form-alt" type="text" class="uk-width-1-1" v-model="image.alt">\n                </div>\n            </div>\n            <div class="uk-form-row uk-margin-top">\n                <button class="uk-button uk-button-primary uk-modal-close" type="button" v-on="click: update">{{ \'Update\' | trans }}</button>\n                <button class="uk-button uk-modal-close" type="button">{{ \'Cancel\' | trans }}</button>\n            </div>\n        </div>\n\n        <div v-if="view == \'finder\'">\n            <h1 class="uk-h3">{{ \'Select Image\' | trans }}</h1>\n            <div v-component="v-finder" v-ref="finder" v-with="root: finder.root"></div>\n            <div class="uk-margin-top">\n                <button class="uk-button uk-button-primary" type="button" v-attr="disabled: !finder.select" v-on="click: closeFinder(finder.select)">{{ \'Select\' | trans }}</button>\n                <button class="uk-button" type="button" v-on="click: closeFinder(false)">{{ \'Cancel\' | trans }}</button>\n            </div>\n        </div>\n\n    </div>\n</div>'},{}],4:[function(e,t,n){jQuery},{}],5:[function(e,t,n){UIkit.plugin("htmleditor","urlresolver",{init:function(e){return e.element.on("renderLate",function(){e.replaceInPreview(/src=["'](.+?)["']/gi,function(e){var t=e.matches[0];return e.matches[1].match(/^(\/|http:|https:|ftp:)/i)||(t=t.replace(e.matches[1],Vue.url["static"](e.matches[1],!0))),t})}),e}})},{}],6:[function(e,t,n){String.prototype.template=function(e,t){for(var n,i="function"==typeof e,o=i?"__tpl"+ +new Date:"",r=JSON.stringify,a=/\$\{([\S\s]*?)\}/g,s=[],c=0;n=a.exec(this);)s.push(r(this.slice(c,a.lastIndex-n[0].length)),o+"("+n[1]+")"),c=a.lastIndex;return s.push(r(this.slice(c))),Function(o,"with(this)return"+s.join("+")).call(i?t:e,i&&e)}},{}],7:[function(e,t,n){t.exports='<div id="editor-video" class="uk-modal">\n    <div class="uk-modal-dialog uk-modal-dialog-large uk-form" v-class="uk-modal-dialog-large: view == \'finder\'">\n\n        <div v-show="view == \'settings\'">\n            <h1 class="uk-h3">{{ \'Video\' | trans }}</h1>\n            <div class="uk-grid">\n                <div class="uk-width-1-3 uk-text-center">\n                    <div>{{{ preview(video.src) }}}</div>\n                </div>\n\n                <div class="uk-width-2-3">\n\n                    <div class="uk-form-row">\n                        <input type="text" class="uk-width-4-5" placeholder="{{ \'URL\' | trans }}" v-model="video.src">\n                        <button type="button" class="uk-button uk-float-right uk-width-1-6" v-on="click: openFinder">{{ \'Select video\' | trans }}</button>\n                    </div>\n\n                </div>\n            </div>\n            <div class="uk-form-row uk-margin-top">\n                <button class="uk-button uk-button-primary uk-modal-close" type="button" v-on="click: update">{{ \'Update\' | trans }}</button>\n                <button class="uk-button uk-modal-close" type="button">{{ \'Cancel\' | trans }}</button>\n            </div>\n        </div>\n\n        <div v-if="view == \'finder\'">\n            <h1 class="uk-h3">{{ \'Select Video\' | trans }}</h1>\n            <div v-component="v-finder" v-ref="finder" v-with="root: finder.root"></div>\n            <div class="uk-margin-top">\n                <button class="uk-button uk-button-primary" type="button" v-attr="disabled: !finder.select" v-on="click: closeFinder(finder.select)">{{ \'Select\' | trans }}</button>\n                <button class="uk-button" type="button" v-on="click: closeFinder(false)">{{ \'Cancel\' | trans }}</button>\n            </div>\n        </div>\n\n    </div>\n</div>'},{}],8:[function(e,t,n){var i=jQuery,o={el:"#editor-video",data:{view:"settings",video:{src:""},finder:{root:"",select:""}},ready:function(){var e=this;this.$on("select.finder",function(t){e.finder.select=1==t.length&&t[0].match(/\.(mpeg|ogv|mp4|webm|wmv)$/i)?t[0]:""})},methods:{update:function(){var e=this.video;e.replace("(video)"+JSON.stringify({src:e.src}))},preview:function(e){var t,n,o=/(\/\/.*?youtube\.[a-z]+)\/watch\?v=([^&]+)&?(.*)/,r=/youtu\.be\/(.*)/,a=/(\/\/.*?)vimeo\.[a-z]+\/([0-9]+).*?/,s=sessionStorage||{};if(n=e.match(o))t='<img src="//img.youtube.com/vi/'+n[2]+'/hqdefault.jpg" class="uk-width-1-1">';else if(n=e.match(r))t='<img src="//img.youtube.com/vi/'+n[1]+'/hqdefault.jpg" class="uk-width-1-1">';else if(e.match(a)){var c=btoa(e);s[c]?t='<img src="'+s[c]+'" class="uk-width-1-1">':(t='<img data-imgid="'+c+'" src="" class="uk-width-1-1">',i.ajax({type:"GET",url:"http://vimeo.com/api/oembed.json?url="+encodeURI(e),jsonp:"callback",dataType:"jsonp",success:function(e){s[c]=e.thumbnail_url,i('img[data-id="'+c+'"]').replaceWith('<img src="'+s[c]+'" class="uk-width-1-1">')}}))}return t?t:'<video class="uk-width-1-1" src="'+e+'"></video>'},openFinder:function(){this.view="finder",this.finder.select=""},closeFinder:function(e){this.view="settings",e&&(this.video.src=e)}}};UIkit.plugin("htmleditor","video",{init:function(e){var t=this;return this.editor=e,this.videos=[],e.addButton("video",{title:"Video",label:'<i class="uk-icon-video-camera"></i>'}),e.element.on("action.video",function(e,n){var i,o=n.getCursor();t.videos.every(function(e){return e.inRange(o)?(i=e,!1):!0}),t.openModal(i)}),e.options.toolbar.push("video"),e.element.on("render",function(){t.videos=e.replaceInPreview(/\(video\)(\{.+?\})/gi,t.replaceInPreview)}),e.preview.on("click",".js-editor-video .js-config",function(){var n=e.preview.find(".js-editor-video .js-config").index(this);t.openModal(t.videos[n])}),e.preview.on("click",".js-editor-video .js-remove",function(){var n=e.preview.find(".js-editor-video .js-remove").index(this);t.videos[n].replace("")}),e},openModal:function(t){var n,r=this.editor,a=r.editor.getCursor(),s=i.extend(!0,{},o),c=r.element.data("finder-options"),d=c.root.replace(/^\/+|\/+$/g,"")+"/";t||(t={src:"",replace:function(e){r.editor.replaceRange(e,a)}}),n=i(e("./modal.html")).appendTo("body"),n.on("hide.uk.modal",function(){i(this).remove()}),UIkit.modal(n).show(),i.extend(s.data.video,t),s.data.finder.root=d,s=new Vue(s)},replaceInPreview:function(e){var t;try{t=JSON.parse(e.matches[1])}catch(n){}return i.extend(e,t||{src:""}),templates["video.replace"].template({src:e.src,preview:o.methods.preview(e.src)}).replace(/(\r\n|\n|\r)/gm,"")}})},{"./modal.html":7}]},{},[1]);