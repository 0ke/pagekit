!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){n(12),n(13),n(16),n(14),n(15);var i=n(1),r=n(3);i(function(){i(document).on("htmleditor-save",function(t,e){e.element[0].form&&i(e.element[0].form).submit()}),i("textarea[data-editor]").each(function(){var t=i(this).data();t.markdown="markdown"in t&&(""===t.markdown||t.markdown),r.htmleditor(this,i.extend({},{marked:marked,CodeMirror:CodeMirror},t))})})},function(t,e,n){t.exports=jQuery},function(t,e,n){t.exports=Vue},function(t,e,n){t.exports=UIkit},,,,,,,,,function(t,e,n){var i=n(1),r=n(2),a=n(3),o={el:"#editor-image",data:{view:"settings",style:"",image:{src:"",alt:""},finder:{root:"",select:""}},ready:function(){var t=this;this.$on("select.finder",function(e){1==e.length&&e[0].match(/\.(png|jpg|jpeg|gif|svg)$/i)?t.finder.select=e[0]:t.finder.select=""}),this.$watch("image.src",this.preview),this.preview()},methods:{update:function(){var t=this.image;t.replace(t.tag.template({src:t.src,alt:t.alt}))},preview:function(){var t=this,e=new Image,n="";this.image.src&&(n=this.$url["static"](this.image.src)),e.onerror=function(){t.style=""},e.onload=function(){t.style='background-image: url("'+n+'"); background-size: contain'},e.src=n},openFinder:function(){this.view="finder",this.finder.select=""},closeFinder:function(t){this.view="settings",t&&(this.image.src=t)}}};a.plugin("htmleditor","image",{init:function(t){var e=this;return this.editor=t,this.images=[],t.element.off("action.image"),t.element.on("action.image",function(){var n,i=t.editor.getCursor();e.images.every(function(t){return t.inRange(i)?(n=t,!1):!0}),e.openModal(n)}),t.element.on("render",function(){var n="gfm"!=t.getMode()?/<img(.+?)>/gi:/(?:<img(.+?)>|!(?:\[([^\n\]]*)\])(?:\(([^\n\]]*)\))?)/gi;e.images=t.replaceInPreview(n,e.replaceInPreview)}),t.preview.on("click",".js-editor-image .js-config",function(){var n=t.preview.find(".js-editor-image .js-config").index(this);e.openModal(e.images[n])}),t.preview.on("click",".js-editor-image .js-remove",function(){var n=t.preview.find(".js-editor-image .js-remove").index(this);e.images[n].replace("")}),t},openModal:function(t){var e,s=this.editor,d=s.editor.getCursor(),c=i.extend(!0,{},o),l=s.element.data("finder-options"),u=l.root.replace(/^\/+|\/+$/g,"")+"/";t||(t={tag:"html"==s.getCursorMode()?'<img src="${src}" alt="${alt}">':"![${alt}](${src})",replace:function(t){s.editor.replaceRange(t,d)}}),e=i(n(17)).appendTo("body"),e.on("hide.uk.modal",function(){i(this).remove()}),a.modal(e).show(),i.extend(c.data.image,t),c.data.finder.root=u,c=new r(c)},replaceInPreview:function(t){if("<"==t.matches[0][0]){if(t.matches[0].match(/js\-no\-parse/))return!1;var e=t.matches[0].match(/src="(.*?)"/),n=t.matches[0].match(/alt="(.*?)"/);t.src=e?e[1]:"",t.alt=n?n[1]:"",t.tag=t.matches[0].replace(/src="(.*?)"/,'src="${src}"').replace(/alt="(.*?)"/,'alt="${alt}"')}else t.src=t.matches[3].trim(),t.alt=t.matches[2],t.tag="![${alt}](${src})";return i("#editor-image-replace").text().template({src:t.src,alt:t.alt}).replace(/(\r\n|\n|\r)/gm,"")}})},function(t,e,n){n(1),n(2),n(3)},function(t,e,n){var i=n(3);i.plugin("htmleditor","urlresolver",{init:function(t){return t.element.on("renderLate",function(){t.replaceInPreview(/src=["'](.+?)["']/gi,function(t){var e=t.matches[0];return t.matches[1].match(/^(\/|http:|https:|ftp:)/i)||(e=e.replace(t.matches[1],Vue.url["static"](t.matches[1],!0))),e})}),t}})},function(t,e,n){String.prototype.template=function(t,e){for(var n,i="function"==typeof t,r=i?"__tpl"+ +new Date:"",a=JSON.stringify,o=/\$\{([\S\s]*?)\}/g,s=[],d=0;n=o.exec(this);)s.push(a(this.slice(d,o.lastIndex-n[0].length)),r+"("+n[1]+")"),d=o.lastIndex;return s.push(a(this.slice(d))),Function(r,"with(this)return"+s.join("+")).call(i?e:t,i&&t)}},function(t,e,n){var i=n(1),r=n(2),a=n(3),o={el:"#editor-video",data:{view:"settings",video:{src:""},finder:{root:"",select:""}},ready:function(){var t=this;this.$on("select.finder",function(e){1==e.length&&e[0].match(/\.(mpeg|ogv|mp4|webm|wmv)$/i)?t.finder.select=e[0]:t.finder.select=""})},methods:{update:function(){var t=this.video;t.replace("(video)"+JSON.stringify({src:t.src}))},preview:function(t){var e,n,r=/(\/\/.*?youtube\.[a-z]+)\/watch\?v=([^&]+)&?(.*)/,a=/youtu\.be\/(.*)/,o=/(\/\/.*?)vimeo\.[a-z]+\/([0-9]+).*?/,s=sessionStorage||{};if(n=t.match(r))e='<img src="//img.youtube.com/vi/'+n[2]+'/hqdefault.jpg" class="uk-width-1-1">';else if(n=t.match(a))e='<img src="//img.youtube.com/vi/'+n[1]+'/hqdefault.jpg" class="uk-width-1-1">';else if(t.match(o)){var d=btoa(t);s[d]?e='<img src="'+s[d]+'" class="uk-width-1-1">':(e='<img data-imgid="'+d+'" src="" class="uk-width-1-1">',i.ajax({type:"GET",url:"http://vimeo.com/api/oembed.json?url="+encodeURI(t),jsonp:"callback",dataType:"jsonp",success:function(t){s[d]=t.thumbnail_url,i('img[data-id="'+d+'"]').replaceWith('<img src="'+s[d]+'" class="uk-width-1-1">')}}))}return e?e:'<video class="uk-width-1-1" src="'+t+'"></video>'},openFinder:function(){this.view="finder",this.finder.select=""},closeFinder:function(t){this.view="settings",t&&(this.video.src=t)}}};a.plugin("htmleditor","video",{init:function(t){var e=this;return this.editor=t,this.videos=[],t.addButton("video",{title:"Video",label:'<i class="uk-icon-video-camera"></i>'}),t.element.on("action.video",function(t,n){var i,r=n.getCursor();e.videos.every(function(t){return t.inRange(r)?(i=t,!1):!0}),e.openModal(i)}),t.options.toolbar.push("video"),t.element.on("render",function(){e.videos=t.replaceInPreview(/\(video\)(\{.+?\})/gi,e.replaceInPreview)}),t.preview.on("click",".js-editor-video .js-config",function(){var n=t.preview.find(".js-editor-video .js-config").index(this);e.openModal(e.videos[n])}),t.preview.on("click",".js-editor-video .js-remove",function(){var n=t.preview.find(".js-editor-video .js-remove").index(this);e.videos[n].replace("")}),t},openModal:function(t){var e,s=this.editor,d=s.editor.getCursor(),c=i.extend(!0,{},o),l=s.element.data("finder-options"),u=l.root.replace(/^\/+|\/+$/g,"")+"/";t||(t={src:"",replace:function(t){s.editor.replaceRange(t,d)}}),e=i(n(18)).appendTo("body"),e.on("hide.uk.modal",function(){i(this).remove()}),a.modal(e).show(),i.extend(c.data.video,t),c.data.finder.root=u,c=new r(c)},replaceInPreview:function(t){var e;try{e=JSON.parse(t.matches[1])}catch(n){}return i.extend(t,e||{src:""}),i("#editor-video-replace").text().template({src:t.src,preview:o.methods.preview(t.src)}).replace(/(\r\n|\n|\r)/gm,"")}})},function(t,e,n){t.exports='<div id=editor-image class=uk-modal><div class="uk-modal-dialog uk-form uk-form-stacked" v-class="uk-modal-dialog-large: view == \'finder\'"><div v-show="view == \'settings\'"><h1 class=uk-h3>{{ \'Image\' | trans }}</h1><div class=uk-form-row><div class=uk-form-controls><div class="pk-thumbnail pk-thumbnail-image" v-attr="style: style"></div><p class=uk-margin-small-top><a v-on="click: openFinder">{{ \'Select image\' | trans }}</a></p></div></div><div class=uk-form-row><label for=form-src class=uk-form-label>{{ \'URL\' | trans }}</label><div class=uk-form-controls><input id=form-src class=uk-width-1-1 v-model=image.src></div></div><div class=uk-form-row><label for=form-alt class=uk-form-label>{{ \'Alt\' | trans }}</label><div class=uk-form-controls><input id=form-alt class=uk-width-1-1 v-model=image.alt></div></div><div class="uk-form-row uk-margin-top"><button class="uk-button uk-button-primary uk-modal-close" type=button v-on="click: update">{{ \'Update\' | trans }}</button> <button class="uk-button uk-modal-close" type=button>{{ \'Cancel\' | trans }}</button></div></div><div v-if="view == \'finder\'"><h1 class=uk-h3>{{ \'Select Image\' | trans }}</h1><div v-component=v-finder v-ref=finder v-with="root: finder.root"></div><div class=uk-margin-top><button class="uk-button uk-button-primary" type=button v-attr="disabled: !finder.select" v-on="click: closeFinder(finder.select)">{{ \'Select\' | trans }}</button> <button class=uk-button type=button v-on="click: closeFinder(false)">{{ \'Cancel\' | trans }}</button></div></div></div></div>'},function(t,e,n){t.exports='<div id=editor-video class=uk-modal><div class="uk-modal-dialog uk-modal-dialog-large uk-form" v-class="uk-modal-dialog-large: view == \'finder\'"><div v-show="view == \'settings\'"><h1 class=uk-h3>{{ \'Video\' | trans }}</h1><div class=uk-grid><div class="uk-width-1-3 uk-text-center"><div>{{{ preview(video.src) }}}</div></div><div class=uk-width-2-3><div class=uk-form-row><input class=uk-width-4-5 placeholder="{{ \'URL\' | trans }}" v-model=video.src><button type=button class="uk-button uk-float-right uk-width-1-6" v-on="click: openFinder">{{ \'Select video\' | trans }}</button></div></div></div><div class="uk-form-row uk-margin-top"><button class="uk-button uk-button-primary uk-modal-close" type=button v-on="click: update">{{ \'Update\' | trans }}</button> <button class="uk-button uk-modal-close" type=button>{{ \'Cancel\' | trans }}</button></div></div><div v-if="view == \'finder\'"><h1 class=uk-h3>{{ \'Select Video\' | trans }}</h1><div v-component=v-finder v-ref=finder v-with="root: finder.root"></div><div class=uk-margin-top><button class="uk-button uk-button-primary" type=button v-attr="disabled: !finder.select" v-on="click: closeFinder(finder.select)">{{ \'Select\' | trans }}</button> <button class=uk-button type=button v-on="click: closeFinder(false)">{{ \'Cancel\' | trans }}</button></div></div></div></div>'}]);